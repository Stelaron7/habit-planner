<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stelaron - Dieselpunk World</title>
    <style>
        /* DIESELPUNK STYLES */
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            background: #1a120b;
            color: #e6d5b8;
        }

        /* WELCOME SCREEN */
        #welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a120b;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s;
        }

        #title-container {
            background: rgba(26, 18, 11, 0.9);
            border: 3px solid #e6d5b8;
            padding: 2rem;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 0 20px rgba(230, 213, 184, 0.3);
        }

        #game-title {
            font-size: 4rem;
            margin: 0;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: #e6d5b8;
            text-shadow: 3px 3px 0 #3e2723;
        }

        #start-button {
            margin-top: 2rem;
            padding: 12px 30px;
            background: transparent;
            border: 2px solid #e6d5b8;
            color: #e6d5b8;
            font-family: inherit;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        #start-button:hover {
            background: rgba(230, 213, 184, 0.2);
        }

        /* 3D WORLD CONTAINER */
        #world-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            perspective: 1000px;
            display: none;
            overflow: hidden;
        }

        /* 3D ELEMENTS */
        .building {
            position: absolute;
            background: #5d4037;
            border: 2px solid #8d6e63;
            transform-style: preserve-3d;
        }

        #player {
            position: absolute;
            width: 50px;
            height: 80px;
            background: #6d4c41;
            border: 2px solid #e6d5b8;
            transform-style: preserve-3d;
            z-index: 100;
        }

        /* UI */
        #game-ui {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(26, 18, 11, 0.9);
            padding: 15px;
            border: 2px solid #e6d5b8;
            border-radius: 5px;
            display: none;
            z-index: 500;
        }
    </style>
</head>
<body>
    <!-- WELCOME SCREEN -->
    <div id="welcome-screen">
        <div id="title-container">
            <h1 id="game-title">STELARON</h1>
            <button id="start-button">IGNITE ENGINES</button>
        </div>
    </div>

    <!-- 3D WORLD -->
    <div id="world-container"></div>

    <!-- GAME UI -->
    <div id="game-ui">
        <div>STEAM PRESSURE: 85%</div>
        <div>COAL RESERVE: 72%</div>
    </div>

    <!-- THREE.JS CSS3D RENDERER -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/renderers/CSS3DRenderer.js"></script>
    <script>
        // 1. INITIALIZE 3D WORLD
        let scene, camera, renderer;
        const worldContainer = document.getElementById('world-container');
        const buildings = [];

        function initWorld() {
            // SCENE
            scene = new THREE.Scene();

            // CAMERA
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/innerHeight, 0.1, 1000);
            camera.position.set(0, 100, 200);

            // RENDERER (CSS3D - NO WEBGL NEEDED)
            renderer = new THREE.CSS3DRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            worldContainer.appendChild(renderer.domElement);

            // CREATE DIESELPUNK CITY
            createBuildings();
            createPlayer();

            // START RENDERING
            animate();
        }

        // 2. CREATE BUILDINGS
        function createBuildings() {
            const buildingCount = 20;
            const spacing = 100;
            const sizeVariation = 50;

            for (let i = 0; i < buildingCount; i++) {
                const width = 40 + Math.random() * sizeVariation;
                const depth = 40 + Math.random() * sizeVariation;
                const height = 60 + Math.random() * sizeVariation * 2;
                const x = (i % 5 - 2) * spacing;
                const z = Math.floor(i / 5 - 2) * spacing;

                const building = document.createElement('div');
                building.className = 'building';
                building.style.width = width + 'px';
                building.style.height = height + 'px';
                building.style.transform = `translate3d(${x}px, ${-height/2}px, ${z}px)`;

                // Add pipes and details
                building.innerHTML = `
                    <div style="position:absolute; top:10px; left:10px; width:20px; height:${height-20}px; background:#8d6e63;"></div>
                    <div style="position:absolute; top:${height-30}px; left:30px; width:${width-60}px; height:20px; background:#6d4c41;"></div>
                `;

                const cssObject = new THREE.CSS3DObject(building);
                cssObject.position.set(x, 0, z);
                scene.add(cssObject);
                buildings.push(cssObject);
            }
        }

        // 3. CREATE PLAYER
        function createPlayer() {
            const playerElement = document.createElement('div');
            playerElement.id = 'player';
            
            const player = new THREE.CSS3DObject(playerElement);
            player.position.set(0, 0, 0);
            scene.add(player);
        }

        // 4. ANIMATION LOOP
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate buildings slightly for parallax effect
            buildings.forEach((building, i) => {
                building.rotation.y += 0.001 * (i % 3 - 1);
            });
            
            renderer.render(scene, camera);
        }

        // 5. START GAME
        document.getElementById('start-button').addEventListener('click', () => {
            document.getElementById('welcome-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('welcome-screen').style.display = 'none';
                document.getElementById('world-container').style.display = 'block';
                document.getElementById('game-ui').style.display = 'block';
                initWorld();
            }, 1000);
        });

        // 6. WINDOW RESIZE
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
